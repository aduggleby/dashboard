services:
  dashboard:
    image: mcr.microsoft.com/dotnet/sdk:10.0
    container_name: dashboard-web-dev
    restart: unless-stopped
    working_dir: /workspace/src/Dashboard.Web
    command: >-
      bash -lc "dotnet restore Dashboard.Web.csproj &&
      dotnet watch --project Dashboard.Web.csproj run --urls http://0.0.0.0:8080"
    environment:
      ASPNETCORE_ENVIRONMENT: Development
      ASPNETCORE_URLS: http://0.0.0.0:8080
      ConnectionStrings__DashboardDb: Data Source=/workspace/data/dashboard.dev.db
    volumes:
      - ./:/workspace
      - dashboard_nuget_cache:/root/.nuget/packages
    ports:
      - "8080:8080"

volumes:
  dashboard_nuget_cache:
